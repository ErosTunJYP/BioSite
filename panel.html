<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Panel de Control | BioSite</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="panel.css">
</head>
<body>
  <form class="panel" autocomplete="off">
    <h2>Panel de Control</h2>
    <div class="img-preview">
      <img id="profile-img" src="iconos/LogoE.png" alt="Imagen de perfil">
      <label for="img-upload">Cambiar imagen</label>
      <input type="file" id="img-upload" accept="image/*" style="display:none;">
    </div>
    <div class="red-social">
      <input type="checkbox" id="tiktok" checked>
      <label for="tiktok">TikTok</label>
      <input type="url" id="tiktok-url" placeholder="Enlace TikTok" value="https://www.tiktok.com/@erosxs7">
    </div>
    <div class="red-social">
      <input type="checkbox" id="spotify" checked>
      <label for="spotify">Spotify</label>
      <input type="url" id="spotify-url" placeholder="Enlace Spotify" value="https://open.spotify.com/show/1uztrpaNoIWRqeNXz0ycy8">
    </div>
    <div class="red-social">
      <input type="checkbox" id="youtube" checked>
      <label for="youtube">YouTube</label>
      <input type="url" id="youtube-url" placeholder="Enlace YouTube" value="https://www.youtube.com/@ErosXS7">
    </div>
    <div class="red-social">
      <input type="checkbox" id="facebook" checked>
      <label for="facebook">Facebook</label>
      <input type="url" id="facebook-url" placeholder="Enlace Facebook" value="https://www.facebook.com/erosxs7">
    </div>
    <div class="red-social">
      <input type="checkbox" id="instagram" checked>
      <label for="instagram">Instagram</label>
      <input type="url" id="instagram-url" placeholder="Enlace Instagram" value="https://www.instagram.com/erosxs7/">
    </div>
    <button type="submit" class="save-btn">Guardar cambios</button>
  </form>
 <script>
  const imgInput = document.getElementById('img-upload');
  const imgPreview = document.getElementById('profile-img');

  // Vista previa de imagen
  imgInput.addEventListener('change', function(e) {
    const file = e.target.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(evt) {
        imgPreview.src = evt.target.result;
      };
      reader.readAsDataURL(file);
    }
  });

  // Abrir selector al dar click en texto
  document.querySelector('label[for="img-upload"]').onclick = () => imgInput.click();

  // Guardar en localStorage
  document.querySelector('.panel').onsubmit = e => {
    e.preventDefault();

    // Guardar imagen
    const file = imgInput.files[0];
    if (file) {
      const reader = new FileReader();
      reader.onload = function(evt) {
        localStorage.setItem('profileImage', evt.target.result);
      };
      reader.readAsDataURL(file);
    }

    // Guardar enlaces y estado de redes
    const redes = ['tiktok', 'spotify', 'youtube', 'facebook', 'instagram'];
    redes.forEach(id => {
      const checkbox = document.getElementById(id);
      const url = document.getElementById(`${id}-url`);
      localStorage.setItem(`${id}-enabled`, checkbox.checked);
      localStorage.setItem(`${id}-url`, url.value);
    });

    alert("Cambios guardados correctamente.");
  };
</script>

</body>
</html>
